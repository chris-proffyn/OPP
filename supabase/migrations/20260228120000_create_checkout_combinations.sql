-- Checkout combinations reference data (totals 2-170): target and three darts per checkout.
-- Source: docs/OPP_checkout_Combinations.csv
-- Dart notation: T20 = Treble 20, D20 = Double 20, Bull = Bullseye, 25 = Single 25, etc. NULL = no dart.

DROP TABLE IF EXISTS public.checkout_combinations;

CREATE TABLE public.checkout_combinations (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  total int NOT NULL UNIQUE CHECK (total >= 2 AND total <= 170),
  dart1 text,
  dart2 text,
  dart3 text,
  created_at timestamptz NOT NULL DEFAULT now()
);

COMMENT ON TABLE public.checkout_combinations IS 'Reference: recommended checkout (target + dart1, dart2, dart3) for each total 2-170. Read-only lookup.';

CREATE INDEX idx_checkout_combinations_total ON public.checkout_combinations(total);

ALTER TABLE public.checkout_combinations ENABLE ROW LEVEL SECURITY;

CREATE POLICY checkout_combinations_select_authenticated ON public.checkout_combinations
  FOR SELECT USING (auth.uid() IS NOT NULL);

INSERT INTO public.checkout_combinations (total, dart1, dart2, dart3) VALUES
  (170, 'T20', 'T20', 'Bull'),
  (169, NULL, NULL, NULL),
  (168, NULL, NULL, NULL),
  (167, 'T20', 'T19', 'Bull'),
  (166, NULL, NULL, NULL),
  (165, NULL, NULL, NULL),
  (164, 'T20', 'T18', 'Bull'),
  (163, NULL, NULL, NULL),
  (162, NULL, NULL, NULL),
  (161, 'T20', 'T17', 'Bull'),
  (160, 'T20', 'T20', 'D20'),
  (159, NULL, NULL, NULL),
  (158, 'T20', 'T20', 'D19'),
  (157, 'T20', 'T19', 'D20'),
  (156, 'T20', 'T20', 'D18'),
  (155, 'T20', 'T15', 'Bull'),
  (154, 'T20', 'T18', 'D20'),
  (153, 'T20', 'T19', 'D18'),
  (152, 'T20', 'T20', 'D16'),
  (151, 'T20', 'T17', 'D20'),
  (150, 'T20', 'T18', 'D18'),
  (149, 'T20', 'T19', 'D16'),
  (148, 'T20', 'T16', 'D20'),
  (147, 'T20', 'T17', 'D18'),
  (146, 'T20', 'T18', 'D16'),
  (145, 'T20', 'T15', 'D20'),
  (144, 'T20', 'T20', 'D12'),
  (143, 'T20', 'T17', 'D16'),
  (142, 'T20', 'T14', 'D20'),
  (141, 'T20', 'T15', 'D18'),
  (140, 'T20', 'T16', 'D16'),
  (139, 'T19', 'T14', 'D20'),
  (138, 'T20', 'T18', 'D12'),
  (137, 'T17', 'T18', 'D16'),
  (136, 'T20', 'T20', 'D8'),
  (135, 'T20', 'T15', 'D15'),
  (134, 'T20', 'T14', 'D16'),
  (133, 'T20', 'T19', 'D8'),
  (132, 'T20', 'T16', 'D12'),
  (131, 'T20', 'T13', 'D16'),
  (130, 'T20', 'T20', 'D5'),
  (129, 'T19', 'T16', 'D12'),
  (128, 'T18', 'T14', 'D16'),
  (127, 'T20', 'T17', 'D8'),
  (126, 'T19', 'T19', 'D6'),
  (125, '25', 'T20', 'D20'),
  (124, 'T20', 'T14', 'D11'),
  (123, 'T19', 'T16', 'D9'),
  (122, 'T18', 'T20', 'D4'),
  (121, 'T17', 'T10', 'D20'),
  (120, 'T20', '20', 'D20'),
  (119, 'T19', '10', 'D26'),
  (118, 'T20', '18', 'D20'),
  (117, 'T20', '17', 'D20'),
  (116, 'T20', '16', 'D20'),
  (115, 'T20', '15', 'D20'),
  (114, 'T20', '14', 'D20'),
  (113, 'T19', '16', 'D20'),
  (112, 'T20', '12', 'D20'),
  (111, 'T19', '14', 'D20'),
  (110, 'T20', 'Bull', NULL),
  (109, 'T20', '9', 'D20'),
  (108, 'T20', '8', 'D20'),
  (107, 'T19', '10', 'D20'),
  (106, 'T20', '6', 'D20'),
  (105, 'T19', '8', 'D20'),
  (104, 'T18', '10', 'D20'),
  (103, 'T19', '6', 'D20'),
  (102, 'T20', '2', 'D20'),
  (101, 'T17', '10', 'D20'),
  (100, 'T20', 'D20', NULL),
  (99, 'T19', '10', 'D16'),
  (98, 'T20', 'D19', NULL),
  (97, 'T19', 'D20', NULL),
  (96, 'T20', 'D18', NULL),
  (95, 'T19', 'D19', NULL),
  (94, 'T18', 'D20', NULL),
  (93, 'T19', 'D18', NULL),
  (92, 'T20', 'D16', NULL),
  (91, 'T17', 'D20', NULL),
  (90, 'T18', 'D18', NULL),
  (89, 'T19', 'D16', NULL),
  (88, 'T16', 'D20', NULL),
  (87, 'T17', 'D18', NULL),
  (86, 'T18', 'D16', NULL),
  (85, 'T15', 'D20', NULL),
  (84, 'T20', 'D12', NULL),
  (83, 'T17', 'D16', NULL),
  (82, 'T14', 'D20', NULL),
  (81, 'T15', 'D18', NULL),
  (80, 'T20', 'D10', NULL),
  (79, 'T13', 'D20', NULL),
  (78, 'T18', 'D12', NULL),
  (77, 'T19', 'D10', NULL),
  (76, 'T20', 'D8', NULL),
  (75, 'T17', 'D12', NULL),
  (74, 'T14', 'D16', NULL),
  (73, 'T19', 'D8', NULL),
  (72, 'T12', 'D18', NULL),
  (71, 'T13', 'D16', NULL),
  (70, 'T10', 'D20', NULL),
  (69, 'T15', 'D12', NULL),
  (68, 'T16', 'D10', NULL),
  (67, 'T17', 'D8', NULL),
  (66, 'T10', 'D18', NULL),
  (65, 'T15', 'D10', NULL),
  (64, 'T16', 'D8', NULL),
  (63, 'T13', 'D12', NULL),
  (62, 'T10', 'D16', NULL),
  (61, 'T15', 'D8', NULL),
  (60, '20', 'D20', NULL),
  (59, '19', 'D20', NULL),
  (58, '18', 'D20', NULL),
  (57, '17', 'D20', NULL),
  (56, '16', 'D20', NULL),
  (55, '15', 'D20', NULL),
  (54, '14', 'D20', NULL),
  (53, '13', 'D20', NULL),
  (52, '12', 'D20', NULL),
  (51, '11', 'D20', NULL),
  (50, 'Bull', NULL, NULL),
  (49, '9', 'D20', NULL),
  (48, '8', 'D20', NULL),
  (47, '7', 'D20', NULL),
  (46, '6', 'D20', NULL),
  (45, '5', 'D20', NULL),
  (44, '4', 'D20', NULL),
  (43, '3', 'D20', NULL),
  (42, '2', 'D20', NULL),
  (41, '1', 'D20', NULL),
  (40, 'D20', NULL, NULL),
  (39, '7', 'D16', NULL),
  (38, 'D19', NULL, NULL),
  (37, '5', 'D16', NULL),
  (36, 'D18', NULL, NULL),
  (35, '3', 'D16', NULL),
  (34, 'D17', NULL, NULL),
  (33, '1', 'D16', NULL),
  (32, 'D16', NULL, NULL),
  (31, '7', 'D12', NULL),
  (30, 'D15', NULL, NULL),
  (29, '13', 'D8', NULL),
  (28, 'D14', NULL, NULL),
  (27, '11', 'D8', NULL),
  (26, 'D13', NULL, NULL),
  (25, '9', 'D8', NULL),
  (24, 'D12', NULL, NULL),
  (23, '7', 'D8', NULL),
  (22, 'D11', NULL, NULL),
  (21, '5', 'D8', NULL),
  (20, 'D10', NULL, NULL),
  (19, '3', 'D8', NULL),
  (18, 'D9', NULL, NULL),
  (17, '1', 'D8', NULL),
  (16, 'D8', NULL, NULL),
  (15, '7', 'D4', NULL),
  (14, 'D7', NULL, NULL),
  (13, '5', 'D4', NULL),
  (12, 'D6', NULL, NULL),
  (11, '3', 'D4', NULL),
  (10, 'D5', NULL, NULL),
  (9, '1', 'D4', NULL),
  (8, 'D4', NULL, NULL),
  (7, '3', 'D2', NULL),
  (6, 'D3', NULL, NULL),
  (5, '1', 'D2', NULL),
  (4, 'D2', NULL, NULL),
  (3, '1', 'D1', NULL),
  (2, 'D1', NULL, NULL);
